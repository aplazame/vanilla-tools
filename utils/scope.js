'use strict';

var evalExpression = require('./eval');

var Scope = function (data) {
	if(!this) {
		return new Scope(data);
	}

  this.extend(data || {});
};

Scope.prototype.new = function(data) {
    return Object.create(this).extend(data);
};

Scope.prototype.extend = function(data) {
  for( var key in data ) {
    this[key] = data[key];
  }
  return this;
};

Scope.prototype.eval = function ( expression, thisArg ) {
  return evalExpression(expression)(this, thisArg);
};

module.exports = Scope;
